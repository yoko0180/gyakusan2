(this.webpackJsonpgyakusan2=this.webpackJsonpgyakusan2||[]).push([[0],{29:function(e){e.exports=JSON.parse('{"name":"gyakusan2","version":"0.5.0","private":true,"dependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","date-fns":"^2.28.0","react":"^17.0.2","react-copy-to-clipboard":"^5.0.3","react-dom":"^17.0.2","react-router-dom":"^5.2.0","react-scripts":"4.0.3","typescript":"^4.1.2","web-vitals":"^1.0.1"},"scripts":{"start":"react-scripts start","test":"react-scripts test","show:css-size":"dir src\\\\*.css && dir work\\\\*.css","dev:build:css:stock":"postcss src/style.css -o work/post.css","dev:replace:css:from-stock":"copy work\\\\post.css src\\\\post.css","dev:build:tailwind":"tailwindcss build src/style.css -o src/post.css","dev:build:tailwind-prod":"set NODE_ENV=production tailwindcss build src/style.css -o src/post.css","build:css":"postcss src/style.css -o src/post.css","build:css-prod":"set NODE_ENV=production postcss src/style.css -o src/post.css","build:react":"react-scripts build","build:404":"copy build\\\\index.html build\\\\404.html","deploy":"gh-pages -d build","build-deploy":"npm run build:react && npm run deploy","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react-copy-to-clipboard":"^5.0.0","@types/react-router-dom":"^5.1.7","autoprefixer":"^10.2.5","fast-xml-parser":"^3.19.0","gh-pages":"^4.0.0","he":"^1.2.0","postcss":"^8.2.15","postcss-cli":"^8.3.1","react-redux":"^7.2.4","tailwind":"^4.0.0","tailwindcss":"^2.2.0"}}')},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),i=n(28),r=n.n(i),a=(n(37),n(38),n(39),n(40),n(32)),o=n(6),l=n(5),u=n(7),d=n(49),j=n(54),b=n(29);var m=function(e,t){var n=function(e){return void 0===e||null===e?0:e},c=function(e,t,n){return e<t?t:e>n?n:e},s=n(e.hours)+n(t.hours),i=n(e.minutes)+n(t.minutes),r=Object(l.a)(Object(l.a)({},e),{},{hours:c(s,0,99),minutes:c(i,0,59)});return console.log("addDuration",e,t,r),r},f=n(0),O=function(e){var t=e.show,n=e.onClose,c=e.children;return Object(f.jsxs)("div",{className:"modal-panel",children:[Object(f.jsx)("div",{className:"modal-overlay "+(t?"":" closed"),id:"modal-overlay"}),Object(f.jsxs)("div",{className:"modal "+(t?"":" closed"),id:"modal",children:[Object(f.jsx)("button",{className:"close-button",id:"close-button",onClick:n,children:"\u9589\u3058\u308b"}),Object(f.jsxs)("div",{className:"modal-guts",children:[Object(f.jsx)("h4",{children:"\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u30a6\u30a3\u30f3\u30c9\u30a6"}),Object(f.jsx)("p",{children:"\u3053\u306e\u7a93\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u9593\u306f\u7a93\u306e\u5916\u306e\u64cd\u4f5c\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u3066\u64cd\u4f5c\u3057\u3066\u4e0b\u3055\u3044\u3002"}),Object(f.jsx)("div",{className:"",children:c})]})]})]})},h=n(48),x=n(55);function v(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}var p=function(e){return void 0===e||null===e?[]:Array.isArray(e)?e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{timeJisseki:e.timeJisseki?h.a(e.timeJisseki):null})})):[]};var g="save-datas";var k=function(e){var t=e.onClickLoad,n=e.items,s=(e.children,Object(c.useState)("")),i=Object(u.a)(s,2),r=i[0],a=i[1],o=Object(c.useState)([]),d=Object(u.a)(o,2),j=d[0],b=d[1];return Object(c.useEffect)((function(){var e=v(g)||[];b(e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{items:p(e.items)})})))}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"border p-2 rounded",children:[Object(f.jsx)("div",{className:"",children:"save list"}),Object(f.jsx)("div",{className:"",children:j.map((function(e){return Object(f.jsxs)("div",{className:"",children:[e.name,Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return t(e)},children:"load"}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return function(e){var t=v(g)||[],n=t.findIndex((function(t){return t.name===e}));n<0||(t.splice(n,1),localStorage.setItem(g,JSON.stringify(t)),b(t))}(e.name)},children:"del"})]})}))}),Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("input",{type:"text",name:"label",id:"input-save-name",className:"input p-2 m-2",onChange:function(e){return a(e.target.value)},value:r}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return function(e,t,n){var c=(s=v(g)||[],i={name:t,items:e},function(e,t,n){var c=e.findIndex(n),s=e.slice();return c>-1&&s.splice(c,1),s.push(t),s}(s,i,(function(e){return e.name===i.name})));var s,i;localStorage.setItem(g,JSON.stringify(c)),n(c)}(n,r,b)},children:"save"})]})]})})},N=n(56),y=n(16),C=n(30),w=n(50),J=n(51),S=n(52),T=n(53);function F(e,t){console.log("save...");try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}function I(e){try{var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):null}catch(n){return null}}var D="items",E="goal";function M(e){var t=Object(c.useState)(function(){var e=I(D);return console.log("load value",e),void 0===e||null===e?[]:Array.isArray(e)?p(e):[]}()),n=Object(u.a)(t,2),s=n[0],i=n[1],r=Object(c.useState)([]),a=Object(u.a)(r,2),o=a[0],j=a[1],b=Object(c.useState)(function(){var e=I(E),t=N.a(d.a(new Date,{hours:10}),{minutes:0});return e?h.a(e):t}()),m=Object(u.a)(b,2),f=m[0],O=m[1];Object(c.useEffect)((function(){}),[]),Object(c.useEffect)((function(){if(F(D,s),F(E,f),f){var t=f,n=("edit"===e?s:s.filter((function(e){return void 0===e.off||!1===e.off}))).map((function(e,n){var c=f,i=e.costOfTime;if(0===n&&(c=y.a(f,i)),0!==n){s[n-1];c=y.a(t,i)}void 0!==e.off&&!1!==e.off||(t=c),e.off&&(c=null);var r=c&&e.timeJisseki?C.a(w.a(e.timeJisseki,0),c):0,a={raw:r,label:r>0?r+"\u5206\u9045\u308c":r<0?Math.abs(r)+"\u5206\u65e9\u3044":"0"};return Object(l.a)(Object(l.a)({},e),{},{time:c,diffJissekiMins:a})})).reverse(),c=function(){var e=-1;return n.forEach((function(t,n){t.timeJisseki&&(e=n)})),e}();console.log("lastJissekiTimeIndex",c);var i={},r=0===n.length?n:n[0].timeJisseki?n.map((function(e,t){return n[0].timeJisseki?(e.timeJisseki||(s=d.a(n[c].timeJisseki,i),console.log("yosokuJisseki",i,s)),e,t>=c&&(i=function(e,t){var n=function(e){return void 0===e||null===e?0:e},c=n(e.hours)+n(t.hours),s=n(e.minutes)+n(t.minutes);return Object(l.a)(Object(l.a)({},e),{},{hours:c,minutes:s})}(i,e.costOfTime)),Object(l.a)(Object(l.a)({},e),{},{yosokuJisseki:s})):e;var s})):n;j(r)}}),[s,f,e]);return Object(c.useEffect)((function(){console.log("itemsView",o)}),[o]),{itemsView:o,items:s,setItems:i,resetGoalToToday:function(){console.log("reset goal",J.a(new Date)),O(N.a(f,{year:S.a(new Date),month:T.a(new Date),date:J.a(new Date)}))},goalDate:f,setGoalDate:O}}var _=function(e){e.lang;var t=Object(c.useRef)(null),n=Object(c.useState)(!1),s=Object(u.a)(n,2),i=s[0],r=s[1],a=Object(c.useState)(!1),h=Object(u.a)(a,2),v=h[0],p=h[1],g=Object(c.useState)(),N=Object(u.a)(g,2),y=N[0],C=N[1],w=Object(c.useState)("edit"),J=Object(u.a)(w,2),S=J[0],T=J[1],F=M(S),I=F.itemsView,D=F.items,E=F.setItems,_=F.resetGoalToToday,L=F.goalDate,A=F.setGoalDate,V=Object(o.f)(),G=Object(c.useState)(""),B=Object(u.a)(G,2),H=B[0],P=B[1],z=Object(c.useState)(""),R=Object(u.a)(z,2),q=R[0],K=R[1],Q=Object(c.useState)(""),U=Object(u.a)(Q,2),W=U[0],X=U[1],Y=Object(c.useState)(""),Z=Object(u.a)(Y,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ne=Object(u.a)(te,2),ce=ne[0],se=ne[1];Object(c.useEffect)((function(){document.title="\u9006\u7b97"}),[V.location,"\u9006\u7b97"]);var ie=function(e,t){E(function(e){var t=null;return e.map((function(e,n,c){var s=Object(l.a)(Object(l.a)({},e),{},{costOfTimeJisseki:Object(l.a)({},t)});if(n===c.length-1)return s;var i=c[n+1].timeJisseki;return e.timeJisseki&&i?(t=x.a({start:e.timeJisseki,end:i}),console.log("nextItemCost",t,"index",n)):t=null,s}))}(function(e,t){return D.map((function(n){return e.id===n.id?t(n):n}))}(e,(function(e){return Object(l.a)(Object(l.a)({},e),{},{timeJisseki:t})}))))},re=function(e,t){console.log("items",D),E(D.map((function(n){return e.id===n.id?Object(l.a)(Object(l.a)({},n),{},{costOfTime:m(n.costOfTime,t)}):n})))},ae=function(e,t){E(D.map((function(n){return e.id===n.id?Object(l.a)(Object(l.a)({},n),{},{off:t}):n})))};Object(c.useEffect)((function(){var e;i&&(null===(e=t.current)||void 0===e||e.focus())}),[i]);var oe=function(e){var t=e.onClick,n=e.color,c=void 0===n?"green":n,s=e.children;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{className:("green"===c?"bg-green-900 ":"")+("red"===c?"bg-red-900 ":"")+"ctrl-btn  p-2 m-1 rounded ",onClick:t,children:s})})},le=function(e){var t=e.onClick,n=e.num,c=e.label;e.children;return Object(f.jsxs)(oe,{onClick:t,children:[n>0&&"+",n,c]})},ue=function(e){var t=e.item,n=e.nums,c=e.cb;e.children;return Object(f.jsx)(f.Fragment,{children:n.map((function(e){return Object(f.jsx)(le,{onClick:function(){c(t,e)},num:e},e)}))})},de=function(e){var t=e.item,n=e.nums;e.children;return Object(f.jsx)(ue,{item:t,nums:n,cb:function(e,t){return re(e,{hours:t})}})},je=function(e){var t=e.children;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("span",{className:"text-xl",children:t})})},be=function(e){var t=e.num,n=e.label,c=e.color,s=void 0===c?"white":c;return Object(f.jsx)(f.Fragment,{children:void 0!==t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:("red"===s?"text-red-500 ":"")+"hours-label text-2xl",children:t}),Object(f.jsx)("span",{children:n})]})})},me=function(e){var t=e.time;if(!t)return Object(f.jsx)(f.Fragment,{});var n=function(e,t){if(!e)return"";try{return Object(j.a)(e,t)}catch(n){return""}};return Object(f.jsx)(f.Fragment,{children:void 0!==t&&null!==t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"hours-label text-gray-300",children:t&&n(t,"MM-dd")}),"\xa0",Object(f.jsx)("span",{className:"hours-label text-2xl",children:t&&n(t,"HH:mm")})]}):Object(f.jsx)("span",{})})};return Object(f.jsxs)("div",{className:"App p-5",children:[Object(f.jsx)("div",{children:Object(f.jsxs)("span",{children:["ver ",b.version]})}),Object(f.jsx)(k,{items:D,onClickLoad:function(e){return E(e.items)}}),Object(f.jsxs)("label",{htmlFor:"",children:["\u9805\u76ee\u8ffd\u52a0",Object(f.jsx)("input",{type:"text",name:"label",id:"input-label",className:"p-2 m-2",onChange:function(e){return P(e.target.value)},value:H})]}),Object(f.jsxs)("div",{className:"m-2",children:[Object(f.jsx)("input",{className:"input-time p-2",type:"number",name:"hour",maxLength:2,min:0,onChange:function(e){return K(e.target.value)},value:q}),"hours",Object(f.jsx)("input",{className:"input-time p-2",type:"number",name:"minutes",maxLength:2,min:0,onChange:function(e){return X(e.target.value)},value:W}),"minutes"]}),Object(f.jsx)("button",{className:"add-btn bg-green-900 p-2 m-1 rounded ",onClick:function(){var e=function(e){return""===e?0:+e},t={id:"item_"+Date.now(),label:H,costOfTime:{hours:e(q),minutes:e(W)},off:!1,timeJisseki:null};E(D.concat([t]))},children:"\u8ffd\u52a0"}),Object(f.jsxs)("div",{className:"view-mode border rounded p-2",children:[Object(f.jsx)("div",{className:"",children:"view mode"}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return T("view")},children:"view"}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return T("edit")},children:"edit"}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return T("move")},children:"move"}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){return T("delete")},children:"delete"})]}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:function(){se(JSON.stringify(D)),p(!0)},children:"import/export"}),Object(f.jsx)("button",{className:"bg-green-900 p-2 m-1 rounded ",onClick:_,children:"reset goal today"}),Object(f.jsxs)(O,{show:i,onClose:function(){return r(!1)},children:[Object(f.jsx)("input",{className:"input input-edit-label text-2xl p-2 rounded",ref:t,type:"text",name:"",id:"",value:$,onChange:function(e){return ee(e.target.value)}}),Object(f.jsx)("button",{className:"btn bg-green-900 p-2 m-1 rounded ",onClick:function(){y&&(E(D.map((function(e){return e.id===y.id?Object(l.a)(Object(l.a)({},e),{},{label:$}):e}))),r(!1))},children:"update"})]}),Object(f.jsxs)(O,{show:v,onClose:function(){return p(!1)},children:[Object(f.jsx)("textarea",{className:"input",name:"",id:"",cols:70,rows:6,value:ce,onChange:function(e){return se(e.target.value)}}),Object(f.jsx)("button",{className:"btn bg-green-900 p-2 m-1 rounded ",onClick:function(){try{E(JSON.parse(ce))}catch(e){console.log("import error",e)}},children:"import"})]}),Object(f.jsxs)("table",{className:"border",children:[Object(f.jsxs)("thead",{children:[Object(f.jsx)("th",{children:"label"}),Object(f.jsx)("th",{colSpan:2,children:"\u6240\u8981\u6642\u9593"}),Object(f.jsx)("th",{children:"start\u6642\u523b"}),Object(f.jsx)("th",{children:"ji\u6642\u523b"})]}),Object(f.jsxs)("tbody",{children:[I.map((function(e){return Object(f.jsxs)("tr",{className:!0===e.off?"off":"",children:[Object(f.jsxs)("td",{children:[Object(f.jsx)(je,{children:e.label}),"delete"===S&&Object(f.jsx)("div",{className:"",children:Object(f.jsx)(oe,{onClick:function(){return function(e){E(D.filter((function(t){return t.id!==e.id})))}(e)},children:"delete"})}),"edit"===S&&Object(f.jsxs)("div",{className:"ctrl",children:[Object(f.jsx)(oe,{onClick:function(){C(e),ee(e.label),r(!0)},children:"edit"}),(void 0===e.off||!1===e.off)&&Object(f.jsx)(oe,{onClick:function(){return ae(e,!0)},children:"off"}),!0===e.off&&Object(f.jsx)(oe,{onClick:function(){return ae(e,!1)},children:"on"})]}),"move"===S&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(oe,{onClick:function(){return function(e){var t=D.reverse(),n=t.findIndex((function(t){return t.id===e.id}));if(!(n<1)){var c=t.slice(0,n-1),s=t.slice(n+1);s.unshift(t[n-1]),console.log("front",c),console.log("back",s);var i=c.concat([e]).concat(s);console.log("new_items",i),E(i.reverse())}}(e)},children:"up"}),Object(f.jsx)(oe,{onClick:function(){return function(e){var t=D.reverse(),n=t.findIndex((function(t){return t.id===e.id}));if(n!==D.length-1){var c=t.slice(0,n),s=t.slice(n+2);c.push(t[n+1]),console.log("front",c),console.log("back",s);var i=c.concat([e]).concat(s);console.log("new_items",i),E(i.reverse())}}(e)},children:"down"}),Object(f.jsx)(oe,{onClick:function(){return function(e){var t=D.reverse(),n=t.findIndex((function(t){return t.id===e.id}));if(console.log("index",n),!(n<0)){var c=[e].concat(t.filter((function(t){return t.id!==e.id})));E(c.reverse())}}(e)},children:"up end"}),Object(f.jsx)(oe,{onClick:function(){return function(e){console.log("moveDownEndItem");var t=D.reverse(),n=t.findIndex((function(t){return t.id===e.id}));if(console.log("index",n),!(n<0)){var c=t.filter((function(t){return t.id!==e.id})).concat([e]);console.log("new_array",c),E(c.reverse())}}(e)},children:"down end"})]})]}),Object(f.jsxs)("td",{children:[Object(f.jsx)(be,{num:e.costOfTime.hours,label:"h"}),e.costOfTimeJisseki&&Object(f.jsx)("div",{className:"",children:Object(f.jsx)(be,{num:e.costOfTimeJisseki.hours,label:"h",color:"red"})}),"edit"===S&&Object(f.jsx)("div",{className:"ctrl",children:Object(f.jsx)(de,{item:e,nums:[1,-1]})})]}),Object(f.jsxs)("td",{children:[Object(f.jsx)(be,{num:e.costOfTime.minutes,label:"m"}),e.costOfTimeJisseki&&Object(f.jsx)("div",{className:"",children:Object(f.jsx)(be,{num:e.costOfTimeJisseki.minutes,label:"m",color:"red"})}),Object(f.jsx)("div",{className:"ctrl",children:"edit"===S&&Object(f.jsx)(ue,{item:e,nums:[5,10,-5,-10],cb:function(e,t){return re(e,{minutes:t})}})})]}),Object(f.jsx)("td",{children:Object(f.jsx)(me,{time:e.time})}),Object(f.jsxs)("td",{children:[Object(f.jsx)("div",{className:"",children:e.yosokuJisseki&&Object(f.jsxs)("div",{className:"text-cyan-400",children:[Object(f.jsx)("span",{children:"\u4e88\u6e2c"}),Object(f.jsx)(me,{time:e.yosokuJisseki})]})}),void 0===e.timeJisseki||null===e.timeJisseki?Object(f.jsx)(oe,{onClick:function(){return ie(e,new Date)},children:"\u8a18\u9332"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(me,{time:e.timeJisseki}),Object(f.jsx)("div",{className:e.diffJissekiMins.raw>0?"bg-red-900":e.diffJissekiMins.raw<0?"bg-blue-900":"",children:e.diffJissekiMins.label}),Object(f.jsx)(oe,{color:"red",onClick:function(){return ie(e,null)},children:"\u524a\u9664"}),"edit"===S&&Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(ue,{item:e,nums:[1,-1],cb:function(e,t){return ie(e,d.a(e.timeJisseki,{minutes:t}))}})})]})]})]},e.id)})),Object(f.jsxs)("tr",{children:[Object(f.jsxs)("td",{colSpan:3,children:["goal",("move"===S||"edit"===S)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(le,{onClick:function(){A(d.a(L,{hours:1}))},num:1,label:"hour"}),Object(f.jsx)(le,{onClick:function(){A(d.a(L,{hours:-1}))},num:-1,label:"hour"}),Object(f.jsx)(le,{onClick:function(){A(d.a(L,{minutes:10}))},num:10,label:"min"}),Object(f.jsx)(le,{onClick:function(){A(d.a(L,{minutes:-10}))},num:-10,label:"min"})]})]}),Object(f.jsx)("td",{children:Object(f.jsx)(me,{time:L})})]})]})]}),Object(f.jsx)("button",{className:"deleteall-btn bg-red-900 p-2 m-5 rounded ",onClick:function(){E([])},children:"delete all"}),Object(f.jsx)("div",{className:"three wide column text-left mt-5",children:"\xa9 2022"})]})};var L=function(){return Object(f.jsx)(a.a,{basename:"/7dtd-integration",children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{path:"/en",children:Object(f.jsx)(_,{lang:"en"})}),Object(f.jsx)(o.a,{path:"/",children:Object(f.jsx)(_,{lang:"ja"})})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),i(e),r(e)}))};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(L,{})}),document.getElementById("root")),A()}},[[47,1,2]]]);